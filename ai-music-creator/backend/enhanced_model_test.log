
> ai-music-creator-backend@1.0.0 start
> node server.js

[dotenv@17.2.1] injecting env (8) from .env -- tip: 🔐 prevent committing .env to code: https://dotenvx.com/precommit
📁 Loaded model: Professional Instrument AI
🧠 Loaded 1 saved models
🎯 Set default active model: Professional Instrument AI
⚠️ Active model [object Object] not found, resetting...
🧠 Auto-selected model as active: Professional Instrument AI
🚀 Initializing Professional Instrument AI with training data for immediate use...
🚀 Initializing Professional Instrument AI with training data...
🎓 Training model Professional Instrument AI on rock with 20 tracks
❌ Training failed for model Professional Instrument AI: ReferenceError: Cannot access 'spotifyAPI' before initialization
    at ModelManager.trainModel (/Users/ewanmcphilliamy/Documents/SunoLikeAppByCluade/ai-music-creator/backend/server.js:756:7)
    at ModelManager.initializeModelWithTraining (/Users/ewanmcphilliamy/Documents/SunoLikeAppByCluade/ai-music-creator/backend/server.js:1114:35)
    at initializeModels (/Users/ewanmcphilliamy/Documents/SunoLikeAppByCluade/ai-music-creator/backend/server.js:1173:26)
    at Object.<anonymous> (/Users/ewanmcphilliamy/Documents/SunoLikeAppByCluade/ai-music-creator/backend/server.js:1184:1)
    at Module._compile (node:internal/modules/cjs/loader:1730:14)
    at Object..js (node:internal/modules/cjs/loader:1895:10)
    at Module.load (node:internal/modules/cjs/loader:1465:32)
    at Function._load (node:internal/modules/cjs/loader:1282:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
🔍 Spotify credential check:
  - CLIENT_ID: 1af28e67...
  - CLIENT_SECRET: 4d272c36...
  - CONFIGURED: true
🎵 Reggae AI Music Creator backend running on http://localhost:3001
📁 Upload directory: /Users/ewanmcphilliamy/Documents/SunoLikeAppByCluade/ai-music-creator/backend/uploads
🎼 Generated music directory: /Users/ewanmcphilliamy/Documents/SunoLikeAppByCluade/ai-music-creator/backend/generated
🔌 WebSocket server ready for real-time updates
🚀 Features: Reggae-focused generation, Spotify training, Dual similarity checks
⚠️ No training data found - connect to Spotify for automatic training
💡 Audio features require user authentication, not just client credentials
⚠️ Failed to pre-train on rock: Training failed: Cannot access 'spotifyAPI' before initialization
🎓 Training model Professional Instrument AI on pop with 20 tracks
🔍 Searching for pop tracks for model training...
🎵 Searching Spotify using client authentication...
🔍 Query "bob marley wailers" returned 19 tracks
  - 19 tracks available for training
  - Sample tracks: Bob Marley & The Wailers - Soul Rebel, Bob Marley & The Wailers - Is This Love, Reggae Beat - Iron Zion Lion
🔍 Query "jimmy cliff" returned 20 tracks
  - 20 tracks available for training
  - Sample tracks: Jimmy Cliff - I Can See Clearly Now, Jimmy Cliff - Rub-A-Dub Partners, Jimmy Cliff - The Harder They Come
🔍 Query "reggae" returned 17 tracks
  - 17 tracks available for training
  - Sample tracks: Bellakath - Reggaeton Champagne, Bob Marley & The Wailers - Could You Be Loved, Damian Marley - My Sweet Lord
🎵 Found 54 unique reggae tracks with previews from Spotify (client auth)
✅ Found 20 real tracks for training
💾 Saved model: Professional Instrument AI
✅ Pre-trained on pop: 20 total samples
🎓 Training model Professional Instrument AI on jazz with 20 tracks
🔍 Searching for jazz tracks for model training...
🎵 Searching Spotify using client authentication...
🔍 Query "bob marley wailers" returned 19 tracks
  - 19 tracks available for training
  - Sample tracks: Bob Marley & The Wailers - Soul Rebel, Bob Marley & The Wailers - Is This Love, Reggae Beat - Iron Zion Lion
🔍 Query "jimmy cliff" returned 20 tracks
  - 20 tracks available for training
  - Sample tracks: Jimmy Cliff - I Can See Clearly Now, Jimmy Cliff - Rub-A-Dub Partners, Jimmy Cliff - The Harder They Come
🔍 Query "reggae" returned 17 tracks
  - 17 tracks available for training
  - Sample tracks: Bellakath - Reggaeton Champagne, Bob Marley & The Wailers - Could You Be Loved, Damian Marley - My Sweet Lord
🎵 Found 54 unique reggae tracks with previews from Spotify (client auth)
✅ Found 20 real tracks for training
💾 Saved model: Professional Instrument AI
✅ Pre-trained on jazz: 40 total samples
🎯 Professional Instrument AI initialized with 40 training samples across 3 genres
✅ Professional Instrument AI ready for immediate use!
⚠️ No Spotify connection or training data - using built-in rock patterns
🎵 Generating rock music with model: Professional Instrument AI (instrument_focused) | Trained tracks: 0 | "test professional instrument layering" | Tempo: 120 | Key: C
🎵 Generation attempt 1/3 for prompt: "test professional instrument layering"
🧠 Using trained reggae model with 0 tracks (Quality: 0.0%)
🔍 GENERATION DEBUG: Training data length = 0
🔍 GENERATION DEBUG: Training cache size = 0
🔍 GENERATION DEBUG: Training stats = {"trackCount":0,"quality":0,"cacheInfo":{"size":0,"maxSize":200,"lastRefresh":null,"isRefreshing":false,"oldestEntry":null},"averageTempoRange":null,"commonKeys":{},"lastUpdate":null,"isTraining":false}
⚠️ No Spotify training data available (0 tracks), using built-in rock patterns
🎵 Generated rock patterns - instruments: drums, bass, electric_guitar, guitar
🔍 ✅ All similarity checks passed - song is unique and appropriate
📊 Training: No training data available
🔄 Self: No previous generations to compare
✅ Generation successful on attempt 1
✅ rock music generated: generated-1754005825705.wav
